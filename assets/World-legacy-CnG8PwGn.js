!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e,o,i){var a=n(c(1&i?t.prototype:t),e,o);return 2&i&&"function"==typeof a?function(t){return a.apply(o,t)}:a}function n(){return n="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},n.apply(null,arguments)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function r(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,n||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}function s(e,n,o){return n=c(n),function(e,n){if(n&&("object"==t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(e,l()?Reflect.construct(n,o||[],c(e).constructor):n.apply(e,o))}function l(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(l=function(){return!!t})()}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}function p(t,e){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p(t,e)}System.register(["./Navbar-legacy-D9XSkfk_.js","./RenderPass-legacy-CQGSWB61.js","./data-legacy-C7E_GmRp.js","./index-legacy-2J_JnTqa.js"],(function(t,n){"use strict";var i,r,l,c,p,d,u,m,f,w,y,v,g,b,x,S,M,P,_,E,k,I,j,C,X,Y,Q,Z,z,A,O,L,q,W,T,F,R,H,D,N;return{setters:[function(t){i=t.N},function(t){r=t.C,l=t.V,c=t.Q,p=t.b,d=t.c,u=t.L,m=t.d,f=t.B,w=t.e,y=t.F,v=t.f,g=t.g,b=t.h,x=t.i,S=t.j,M=t.k,P=t.l,_=t.m,E=t.n,k=t.o,I=t.G,j=t.T,C=t.p,X=t.M,Y=t.O,Q=t.q},function(t){Z=t.T,z=t.d},function(t){A=t._,O=t.r,L=t.j,q=t.c,W=t.i,T=t.a,F=t.b,R=t.u,H=t.F,D=t.e,N=t.o}],execute:function(){var U=document.createElement("style");U.textContent=".leftdown[data-v-179df4d2]{position:absolute;width:449px;height:497px;left:0;top:78px;z-index:2;overflow:hidden}.div-panel[data-v-179df4d2]{position:absolute;width:389px;height:497px;margin-top:100px;margin-left:30px;display:flex;flex-wrap:wrap;align-content:flex-start}.div-content[data-v-179df4d2]{margin:5px;width:66px;height:66px}.deleteicon[data-v-179df4d2]{cursor:pointer;position:absolute;margin-left:50px;margin-top:-5px}.mp[data-v-179df4d2]{cursor:pointer}.threejs-container[data-v-179df4d2]{position:absolute;width:1399px;height:868px;left:479px;top:78px;z-index:10}ul[data-v-179df4d2]{list-style:none;margin:0;padding:0}img[data-v-179df4d2]{border:none;border-width:0px 0px 0px 0px}.note-none[data-v-179df4d2]{display:none!important}.note-show[data-v-179df4d2]{display:flex!important}\n/*$vite$:1*/",document.head.appendChild(U);var B=""+new URL("../World/bag tag.png",n.meta.url).href,G=""+new URL("../World/worldbg.png",n.meta.url).href,J=""+new URL("../World/sky.png",n.meta.url).href,$=""+new URL("../World/scene-tag.png",n.meta.url).href,V=""+new URL("../icon/delete.png",n.meta.url).href,K=""+new URL("../World/bag.png",n.meta.url).href,tt=new _,et=new l,nt=new l,ot=new c,it={X:new l(1,0,0),Y:new l(0,1,0),Z:new l(0,0,1)},at={type:"change"},rt={type:"mouseDown",mode:null},st={type:"mouseUp",mode:null},lt={type:"objectChange"},ct=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o(this,e),n=s(this,e,[void 0,i]);var a=new Ct(n);n._root=a;var r=new Xt;n._gizmo=r,a.add(r);var h=new Yt;n._plane=h,a.add(h);var p=n;function d(t,e){var n=e;Object.defineProperty(p,t,{get:function(){return void 0!==n?n:e},set:function(e){n!==e&&(n=e,h[t]=e,r[t]=e,p.dispatchEvent({type:t+"-changed",value:e}),p.dispatchEvent(at))}}),p[t]=e,h[t]=e,r[t]=e}d("camera",t),d("object",void 0),d("enabled",!0),d("axis",null),d("mode","translate"),d("translationSnap",null),d("rotationSnap",null),d("scaleSnap",null),d("space","world"),d("size",1),d("dragging",!1),d("showX",!0),d("showY",!0),d("showZ",!0);var u=new l,m=new l,f=new c,w=new c,y=new l,v=new c,g=new l,b=new l,x=new l,S=new l;return d("worldPosition",u),d("worldPositionStart",m),d("worldQuaternion",f),d("worldQuaternionStart",w),d("cameraPosition",y),d("cameraQuaternion",v),d("pointStart",g),d("pointEnd",b),d("rotationAxis",x),d("rotationAngle",0),d("eye",S),n._offset=new l,n._startNorm=new l,n._endNorm=new l,n._cameraScale=new l,n._parentPosition=new l,n._parentQuaternion=new c,n._parentQuaternionInv=new c,n._parentScale=new l,n._worldScaleStart=new l,n._worldQuaternionInv=new c,n._worldScale=new l,n._positionStart=new l,n._quaternionStart=new c,n._scaleStart=new l,n._getPointer=ht.bind(n),n._onPointerDown=dt.bind(n),n._onPointerHover=pt.bind(n),n._onPointerMove=ut.bind(n),n._onPointerUp=mt.bind(n),null!==i&&n.connect(),n}return h(e,t),a(e,[{key:"connect",value:function(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp),this.domElement.style.touchAction="none"}},{key:"disconnect",value:function(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.style.touchAction="auto"}},{key:"getHelper",value:function(){return this._root}},{key:"pointerHover",value:function(t){if(void 0!==this.object&&!0!==this.dragging){null!==t&&tt.setFromCamera(t,this.camera);var e=ft(this._gizmo.picker[this.mode],tt);this.axis=e?e.object.name:null}}},{key:"pointerDown",value:function(t){if(void 0!==this.object&&!0!==this.dragging&&(null==t||0===t.button)&&null!==this.axis){null!==t&&tt.setFromCamera(t,this.camera);var e=ft(this._plane,tt,!0);e&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(e.point).sub(this.worldPositionStart)),this.dragging=!0,rt.mode=this.mode,this.dispatchEvent(rt)}}},{key:"pointerMove",value:function(t){var e=this.axis,n=this.mode,o=this.object,i=this.space;if("scale"===n?i="local":"E"!==e&&"XYZE"!==e&&"XYZ"!==e||(i="world"),void 0!==o&&null!==e&&!1!==this.dragging&&(null===t||-1===t.button)){null!==t&&tt.setFromCamera(t,this.camera);var a=ft(this._plane,tt,!0);if(a){if(this.pointEnd.copy(a.point).sub(this.worldPositionStart),"translate"===n)this._offset.copy(this.pointEnd).sub(this.pointStart),"local"===i&&"XYZ"!==e&&this._offset.applyQuaternion(this._worldQuaternionInv),-1===e.indexOf("X")&&(this._offset.x=0),-1===e.indexOf("Y")&&(this._offset.y=0),-1===e.indexOf("Z")&&(this._offset.z=0),"local"===i&&"XYZ"!==e?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),o.position.copy(this._offset).add(this._positionStart),this.translationSnap&&("local"===i&&(o.position.applyQuaternion(ot.copy(this._quaternionStart).invert()),-1!==e.search("X")&&(o.position.x=Math.round(o.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(o.position.y=Math.round(o.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(o.position.z=Math.round(o.position.z/this.translationSnap)*this.translationSnap),o.position.applyQuaternion(this._quaternionStart)),"world"===i&&(o.parent&&o.position.add(et.setFromMatrixPosition(o.parent.matrixWorld)),-1!==e.search("X")&&(o.position.x=Math.round(o.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(o.position.y=Math.round(o.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(o.position.z=Math.round(o.position.z/this.translationSnap)*this.translationSnap),o.parent&&o.position.sub(et.setFromMatrixPosition(o.parent.matrixWorld))));else if("scale"===n){if(-1!==e.search("XYZ")){var r=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(r*=-1),nt.set(r,r,r)}else et.copy(this.pointStart),nt.copy(this.pointEnd),et.applyQuaternion(this._worldQuaternionInv),nt.applyQuaternion(this._worldQuaternionInv),nt.divide(et),-1===e.search("X")&&(nt.x=1),-1===e.search("Y")&&(nt.y=1),-1===e.search("Z")&&(nt.z=1);o.scale.copy(this._scaleStart).multiply(nt),this.scaleSnap&&(-1!==e.search("X")&&(o.scale.x=Math.round(o.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Y")&&(o.scale.y=Math.round(o.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Z")&&(o.scale.z=Math.round(o.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===n){this._offset.copy(this.pointEnd).sub(this.pointStart);var s=20/this.worldPosition.distanceTo(et.setFromMatrixPosition(this.camera.matrixWorld)),l=!1;"XYZE"===e?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(et.copy(this.rotationAxis).cross(this.eye))*s):"X"!==e&&"Y"!==e&&"Z"!==e||(this.rotationAxis.copy(it[e]),et.copy(it[e]),"local"===i&&et.applyQuaternion(this.worldQuaternion),et.cross(this.eye),0===et.length()?l=!0:this.rotationAngle=this._offset.dot(et.normalize())*s),("E"===e||l)&&(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),"local"===i&&"E"!==e&&"XYZE"!==e?(o.quaternion.copy(this._quaternionStart),o.quaternion.multiply(ot.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),o.quaternion.copy(ot.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),o.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(at),this.dispatchEvent(lt)}}}},{key:"pointerUp",value:function(t){null!==t&&0!==t.button||(this.dragging&&null!==this.axis&&(st.mode=this.mode,this.dispatchEvent(st)),this.dragging=!1,this.axis=null)}},{key:"dispose",value:function(){this.disconnect(),this.traverse((function(t){t.geometry&&t.geometry.dispose(),t.material&&t.material.dispose()}))}},{key:"attach",value:function(t){return this.object=t,this._root.visible=!0,this}},{key:"detach",value:function(){return this.object=void 0,this.axis=null,this._root.visible=!1,this}},{key:"reset",value:function(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(at),this.dispatchEvent(lt),this.pointStart.copy(this.pointEnd))}},{key:"getRaycaster",value:function(){return tt}},{key:"getMode",value:function(){return this.mode}},{key:"setMode",value:function(t){this.mode=t}},{key:"setTranslationSnap",value:function(t){this.translationSnap=t}},{key:"setRotationSnap",value:function(t){this.rotationSnap=t}},{key:"setScaleSnap",value:function(t){this.scaleSnap=t}},{key:"setSize",value:function(t){this.size=t}},{key:"setSpace",value:function(t){this.space=t}}])}(r);function ht(t){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:t.button};var e=this.domElement.getBoundingClientRect();return{x:(t.clientX-e.left)/e.width*2-1,y:-(t.clientY-e.top)/e.height*2+1,button:t.button}}function pt(t){if(this.enabled)switch(t.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(t))}}function dt(t){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(t)),this.pointerDown(this._getPointer(t)))}function ut(t){this.enabled&&this.pointerMove(this._getPointer(t))}function mt(t){this.enabled&&(this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(t)))}function ft(t,e,n){for(var o=e.intersectObject(t,!0),i=0;i<o.length;i++)if(o[i].object.visible||n)return o[i];return!1}var wt=new E,yt=new l(0,1,0),vt=new l(0,0,0),gt=new k,bt=new c,xt=new c,St=new l,Mt=new k,Pt=new l(1,0,0),_t=new l(0,1,0),Et=new l(0,0,1),kt=new l,It=new l,jt=new l,Ct=function(t){function n(t){var e;return o(this,n),(e=s(this,n)).isTransformControlsRoot=!0,e.controls=t,e.visible=!1,e}return h(n,t),a(n,[{key:"updateMatrixWorld",value:function(t){var o=this.controls;void 0!==o.object&&(o.object.updateMatrixWorld(),null===o.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):o.object.parent.matrixWorld.decompose(o._parentPosition,o._parentQuaternion,o._parentScale),o.object.matrixWorld.decompose(o.worldPosition,o.worldQuaternion,o._worldScale),o._parentQuaternionInv.copy(o._parentQuaternion).invert(),o._worldQuaternionInv.copy(o.worldQuaternion).invert()),o.camera.updateMatrixWorld(),o.camera.matrixWorld.decompose(o.cameraPosition,o.cameraQuaternion,o._cameraScale),o.camera.isOrthographicCamera?o.camera.getWorldDirection(o.eye).negate():o.eye.copy(o.cameraPosition).sub(o.worldPosition).normalize(),e(n,"updateMatrixWorld",this,3)([t])}}])}(p),Xt=function(t){function n(){var t;o(this,n),(t=s(this,n)).isTransformControlsGizmo=!0,t.type="TransformControlsGizmo";var e=new d({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),i=new u({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),a=e.clone();a.opacity=.15;var r=i.clone();r.opacity=.5;var l=e.clone();l.color.setHex(16711680);var c=e.clone();c.color.setHex(65280);var h=e.clone();h.color.setHex(255);var M=e.clone();M.color.setHex(16711680),M.opacity=.5;var P=e.clone();P.color.setHex(65280),P.opacity=.5;var _=e.clone();_.color.setHex(255),_.opacity=.5;var E=e.clone();E.opacity=.25;var k=e.clone();k.color.setHex(16776960),k.opacity=.25,e.clone().color.setHex(16776960);var I=e.clone();I.color.setHex(7895160);var j=new m(0,.04,.1,12);j.translate(0,.05,0);var C=new f(.08,.08,.08);C.translate(0,.04,0);var X=new w;X.setAttribute("position",new y([0,0,0,1,0,0],3));var Y=new m(.0075,.0075,.5,3);function Q(t,e){var n=new S(t,.0075,3,64,e*Math.PI*2);return n.rotateY(Math.PI/2),n.rotateX(Math.PI/2),n}Y.translate(0,.25,0);var Z,z={X:[[new v(j,l),[.5,0,0],[0,0,-Math.PI/2]],[new v(j,l),[-.5,0,0],[0,0,Math.PI/2]],[new v(Y,l),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new v(j,c),[0,.5,0]],[new v(j,c),[0,-.5,0],[Math.PI,0,0]],[new v(Y,c)]],Z:[[new v(j,h),[0,0,.5],[Math.PI/2,0,0]],[new v(j,h),[0,0,-.5],[-Math.PI/2,0,0]],[new v(Y,h),null,[Math.PI/2,0,0]]],XYZ:[[new v(new g(.1,0),E.clone()),[0,0,0]]],XY:[[new v(new f(.15,.15,.01),_.clone()),[.15,.15,0]]],YZ:[[new v(new f(.15,.15,.01),M.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new v(new f(.15,.15,.01),P.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},A={X:[[new v(new m(.2,0,.6,4),a),[.3,0,0],[0,0,-Math.PI/2]],[new v(new m(.2,0,.6,4),a),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new v(new m(.2,0,.6,4),a),[0,.3,0]],[new v(new m(.2,0,.6,4),a),[0,-.3,0],[0,0,Math.PI]]],Z:[[new v(new m(.2,0,.6,4),a),[0,0,.3],[Math.PI/2,0,0]],[new v(new m(.2,0,.6,4),a),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new v(new g(.2,0),a)]],XY:[[new v(new f(.2,.2,.01),a),[.15,.15,0]]],YZ:[[new v(new f(.2,.2,.01),a),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new v(new f(.2,.2,.01),a),[.15,0,.15],[-Math.PI/2,0,0]]]},O={START:[[new v(new g(.01,2),r),null,null,null,"helper"]],END:[[new v(new g(.01,2),r),null,null,null,"helper"]],DELTA:[[new b((Z=new w,Z.setAttribute("position",new y([0,0,0,1,1,1],3)),Z),r),null,null,null,"helper"]],X:[[new b(X,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new b(X,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new b(X,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},L={XYZE:[[new v(Q(.5,1),I),null,[0,Math.PI/2,0]]],X:[[new v(Q(.5,.5),l)]],Y:[[new v(Q(.5,.5),c),null,[0,0,-Math.PI/2]]],Z:[[new v(Q(.5,.5),h),null,[0,Math.PI/2,0]]],E:[[new v(Q(.75,1),k),null,[0,Math.PI/2,0]]]},q={AXIS:[[new b(X,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},W={XYZE:[[new v(new x(.25,10,8),a)]],X:[[new v(new S(.5,.1,4,24),a),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new v(new S(.5,.1,4,24),a),[0,0,0],[Math.PI/2,0,0]]],Z:[[new v(new S(.5,.1,4,24),a),[0,0,0],[0,0,-Math.PI/2]]],E:[[new v(new S(.75,.1,2,24),a)]]},T={X:[[new v(C,l),[.5,0,0],[0,0,-Math.PI/2]],[new v(Y,l),[0,0,0],[0,0,-Math.PI/2]],[new v(C,l),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new v(C,c),[0,.5,0]],[new v(Y,c)],[new v(C,c),[0,-.5,0],[0,0,Math.PI]]],Z:[[new v(C,h),[0,0,.5],[Math.PI/2,0,0]],[new v(Y,h),[0,0,0],[Math.PI/2,0,0]],[new v(C,h),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new v(new f(.15,.15,.01),_),[.15,.15,0]]],YZ:[[new v(new f(.15,.15,.01),M),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new v(new f(.15,.15,.01),P),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new v(new f(.1,.1,.1),E.clone())]]},F={X:[[new v(new m(.2,0,.6,4),a),[.3,0,0],[0,0,-Math.PI/2]],[new v(new m(.2,0,.6,4),a),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new v(new m(.2,0,.6,4),a),[0,.3,0]],[new v(new m(.2,0,.6,4),a),[0,-.3,0],[0,0,Math.PI]]],Z:[[new v(new m(.2,0,.6,4),a),[0,0,.3],[Math.PI/2,0,0]],[new v(new m(.2,0,.6,4),a),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new v(new f(.2,.2,.01),a),[.15,.15,0]]],YZ:[[new v(new f(.2,.2,.01),a),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new v(new f(.2,.2,.01),a),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new v(new f(.2,.2,.2),a),[0,0,0]]]},R={X:[[new b(X,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new b(X,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new b(X,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function H(t){var e=new p;for(var n in t)for(var o=t[n].length;o--;){var i=t[n][o][0].clone(),a=t[n][o][1],r=t[n][o][2],s=t[n][o][3],l=t[n][o][4];i.name=n,i.tag=l,a&&i.position.set(a[0],a[1],a[2]),r&&i.rotation.set(r[0],r[1],r[2]),s&&i.scale.set(s[0],s[1],s[2]),i.updateMatrix();var c=i.geometry.clone();c.applyMatrix4(i.matrix),i.geometry=c,i.renderOrder=1/0,i.position.set(0,0,0),i.rotation.set(0,0,0),i.scale.set(1,1,1),e.add(i)}return e}return t.gizmo={},t.picker={},t.helper={},t.add(t.gizmo.translate=H(z)),t.add(t.gizmo.rotate=H(L)),t.add(t.gizmo.scale=H(T)),t.add(t.picker.translate=H(A)),t.add(t.picker.rotate=H(W)),t.add(t.picker.scale=H(F)),t.add(t.helper.translate=H(O)),t.add(t.helper.rotate=H(q)),t.add(t.helper.scale=H(R)),t.picker.translate.visible=!1,t.picker.rotate.visible=!1,t.picker.scale.visible=!1,t}return h(n,t),a(n,[{key:"updateMatrixWorld",value:function(t){var o=this,i="local"===("scale"===this.mode?"local":this.space)?this.worldQuaternion:xt;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;var a=[];a=(a=(a=a.concat(this.picker[this.mode].children)).concat(this.gizmo[this.mode].children)).concat(this.helper[this.mode].children);for(var r=function(){var t,e=a[s];if(e.visible=!0,e.rotation.set(0,0,0),e.position.copy(o.worldPosition),t=o.camera.isOrthographicCamera?(o.camera.top-o.camera.bottom)/o.camera.zoom:o.worldPosition.distanceTo(o.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*o.camera.fov/360)/o.camera.zoom,7),e.scale.set(1,1,1).multiplyScalar(t*o.size/4),"helper"===e.tag)return e.visible=!1,"AXIS"===e.name?(e.visible=!!o.axis,"X"===o.axis&&(ot.setFromEuler(wt.set(0,0,0)),e.quaternion.copy(i).multiply(ot),Math.abs(yt.copy(Pt).applyQuaternion(i).dot(o.eye))>.9&&(e.visible=!1)),"Y"===o.axis&&(ot.setFromEuler(wt.set(0,0,Math.PI/2)),e.quaternion.copy(i).multiply(ot),Math.abs(yt.copy(_t).applyQuaternion(i).dot(o.eye))>.9&&(e.visible=!1)),"Z"===o.axis&&(ot.setFromEuler(wt.set(0,Math.PI/2,0)),e.quaternion.copy(i).multiply(ot),Math.abs(yt.copy(Et).applyQuaternion(i).dot(o.eye))>.9&&(e.visible=!1)),"XYZE"===o.axis&&(ot.setFromEuler(wt.set(0,Math.PI/2,0)),yt.copy(o.rotationAxis),e.quaternion.setFromRotationMatrix(gt.lookAt(vt,yt,_t)),e.quaternion.multiply(ot),e.visible=o.dragging),"E"===o.axis&&(e.visible=!1)):"START"===e.name?(e.position.copy(o.worldPositionStart),e.visible=o.dragging):"END"===e.name?(e.position.copy(o.worldPosition),e.visible=o.dragging):"DELTA"===e.name?(e.position.copy(o.worldPositionStart),e.quaternion.copy(o.worldQuaternionStart),et.set(1e-10,1e-10,1e-10).add(o.worldPositionStart).sub(o.worldPosition).multiplyScalar(-1),et.applyQuaternion(o.worldQuaternionStart.clone().invert()),e.scale.copy(et),e.visible=o.dragging):(e.quaternion.copy(i),o.dragging?e.position.copy(o.worldPositionStart):e.position.copy(o.worldPosition),o.axis&&(e.visible=-1!==o.axis.search(e.name))),1;if(e.quaternion.copy(i),"translate"===o.mode||"scale"===o.mode){var n=.99;"X"===e.name&&Math.abs(yt.copy(Pt).applyQuaternion(i).dot(o.eye))>n&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),"Y"===e.name&&Math.abs(yt.copy(_t).applyQuaternion(i).dot(o.eye))>n&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),"Z"===e.name&&Math.abs(yt.copy(Et).applyQuaternion(i).dot(o.eye))>n&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),"XY"===e.name&&Math.abs(yt.copy(Et).applyQuaternion(i).dot(o.eye))<.2&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),"YZ"===e.name&&Math.abs(yt.copy(Pt).applyQuaternion(i).dot(o.eye))<.2&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),"XZ"===e.name&&Math.abs(yt.copy(_t).applyQuaternion(i).dot(o.eye))<.2&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1)}else"rotate"===o.mode&&(bt.copy(i),yt.copy(o.eye).applyQuaternion(ot.copy(i).invert()),-1!==e.name.search("E")&&e.quaternion.setFromRotationMatrix(gt.lookAt(o.eye,vt,_t)),"X"===e.name&&(ot.setFromAxisAngle(Pt,Math.atan2(-yt.y,yt.z)),ot.multiplyQuaternions(bt,ot),e.quaternion.copy(ot)),"Y"===e.name&&(ot.setFromAxisAngle(_t,Math.atan2(yt.x,yt.z)),ot.multiplyQuaternions(bt,ot),e.quaternion.copy(ot)),"Z"===e.name&&(ot.setFromAxisAngle(Et,Math.atan2(yt.y,yt.x)),ot.multiplyQuaternions(bt,ot),e.quaternion.copy(ot)));e.visible=e.visible&&(-1===e.name.indexOf("X")||o.showX),e.visible=e.visible&&(-1===e.name.indexOf("Y")||o.showY),e.visible=e.visible&&(-1===e.name.indexOf("Z")||o.showZ),e.visible=e.visible&&(-1===e.name.indexOf("E")||o.showX&&o.showY&&o.showZ),e.material._color=e.material._color||e.material.color.clone(),e.material._opacity=e.material._opacity||e.material.opacity,e.material.color.copy(e.material._color),e.material.opacity=e.material._opacity,o.enabled&&o.axis&&(e.name===o.axis||o.axis.split("").some((function(t){return e.name===t})))&&(e.material.color.setHex(16776960),e.material.opacity=1)},s=0;s<a.length;s++)r();e(n,"updateMatrixWorld",this,3)([t])}}])}(p),Yt=function(t){function n(){var t;return o(this,n),(t=s(this,n,[new M(1e5,1e5,2,2),new d({visible:!1,wireframe:!0,side:P,transparent:!0,opacity:.1,toneMapped:!1})])).isTransformControlsPlane=!0,t.type="TransformControlsPlane",t}return h(n,t),a(n,[{key:"updateMatrixWorld",value:function(t){var o=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(o="local"),kt.copy(Pt).applyQuaternion("local"===o?this.worldQuaternion:xt),It.copy(_t).applyQuaternion("local"===o?this.worldQuaternion:xt),jt.copy(Et).applyQuaternion("local"===o?this.worldQuaternion:xt),yt.copy(It),this.mode){case"translate":case"scale":switch(this.axis){case"X":yt.copy(this.eye).cross(kt),St.copy(kt).cross(yt);break;case"Y":yt.copy(this.eye).cross(It),St.copy(It).cross(yt);break;case"Z":yt.copy(this.eye).cross(jt),St.copy(jt).cross(yt);break;case"XY":St.copy(jt);break;case"YZ":St.copy(kt);break;case"XZ":yt.copy(jt),St.copy(It);break;case"XYZ":case"E":St.set(0,0,0)}break;default:St.set(0,0,0)}0===St.length()?this.quaternion.copy(this.cameraQuaternion):(Mt.lookAt(et.set(0,0,0),St,yt),this.quaternion.setFromRotationMatrix(Mt)),e(n,"updateMatrixWorld",this,3)([t])}}])}(v),Qt=function(t){function n(t){var e;return o(this,n),(e=s(this,n)).data=t.data,e.arrCollect=t.arrCollect,e.object="",e.group=new I,e.textureLoader=new j,e.vmLayout="",e.dataLayout="",e.manager="",e.material="",e.transformControls="",e.currentObject="",e.raycaster=new _,e.mouse=new C,e.arr=[],e}return h(n,t),a(n,[{key:"initData",value:function(){this.flagLoadData=!0}},{key:"initModel",value:function(){}},{key:"deleteModel",value:function(t){for(var e=[],n=0;n<this.arr.length;n++){t==this.arr[n].ids-0?this.scene.remove(this.arr[n]):e.push(this.arr[n])}this.arr=e}},{key:"addModel",value:function(t){var e=this;console.log(t);for(var n="",o=0;o<this.data.length;o++){this.data[o].id==t&&(n=this.data[o])}if(n){var i=n,a=i.id,r=i.name,s=i.modelurl,l=i.textureurl;this.textureLoader.load(l,(function(t){var n=new X({color:16777215,map:t});(new Y).load(s,(function(t){t.name=r,t.traverse((function(t){t.isMesh&&(t.material=n)})),t.ids=a,e.scene.add(t),e.object=t,e.arr.push(e.object)}),(function(t){console.log("".concat(t.loaded/t.total*100,"% loaded"))}),(function(t){console.error("An error happened while loading the model:",t)}))}))}}},{key:"start",value:function(){var t=this,e=new Q(150,100);e.position.y=-1,e.material.opacity=.25,e.material.transparent=!0,this.scene.add(e),this.transformControls=new ct(this.camera,this.renderer.domElement),this.transformControls.setSize(1.5);var n=this.transformControls.getHelper();this.scene.add(n),this.transformControls.addEventListener("dragging-changed",(function(e){t.controls.enabled=!e.value})),window.addEventListener("keydown",(function(e){switch(e.key){case"q":t.transformControls.setSpace("local"===t.transformControls.space?"world":"local");break;case"w":t.transformControls.setMode("translate");break;case"e":t.transformControls.setMode("rotate");break;case"r":t.transformControls.setMode("scale");break;case"+":case"=":t.transformControls.setSize(t.transformControls.size+.1);break;case"-":case"_":t.transformControls.setSize(Math.max(t.transformControls.size-.1,.1));break;case"x":t.transformControls.showX=!t.transformControls.showX;break;case"y":t.transformControls.showY=!t.transformControls.showY;break;case"z":t.transformControls.showZ=!t.transformControls.showZ;break;case"Escape":t.transformControls.reset()}})),window.addEventListener("click",this.onMouseClick.bind(this),!1)}},{key:"onMouseClick",value:function(t){var e=document.getElementsByTagName("canvas")[0];this.mouse.x=(t.clientX-e.getBoundingClientRect().left)/e.offsetWidth*2-1,this.mouse.y=-(t.clientY-e.getBoundingClientRect().top)/e.offsetHeight*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);var n=this.raycaster.intersectObjects(this.arr);if(n.length>0){var o=n[0].object;this.currentObject!==o&&(this.currentObject&&this.transformControls.detach(this.currentObject),this.currentObject=o,this.transformControls.attach(this.currentObject))}else this.transformControls.detach(this.currentObject)}},{key:"initControls",value:function(){e(n,"initControls",this,3)([])}},{key:"render",value:function(){e(n,"render",this,3)([])}}])}(Z),Zt=[{id:1,fid:1,name:"1-mechine",thumurl:"./icon/icon-id1.png"},{id:2,fid:1,name:"2-milktea",thumurl:"./icon/icon-id2.png"},{id:3,fid:1,name:"3-phone",thumurl:"./icon/icon-id3.png"},{id:4,fid:1,name:"4-startree",thumurl:"./icon/icon-id4.png"},{id:5,fid:1,name:"5-ladder",thumurl:"./icon/icon-id5.png"},{id:6,fid:3,name:"6-cheese",thumurl:"./icon/icon-id6.png"},{id:7,fid:3,name:"7-bed",thumurl:"./icon/icon-id7.png"},{id:8,fid:3,name:"8-balcony",thumurl:"./icon/icon-id8.png"},{id:9,fid:3,name:"9-mango",thumurl:"./icon/icon-id9.png"},{id:10,fid:3,name:"10-peach",thumurl:"./icon/icon-id10.png"},{id:11,fid:2,name:"11-chair",thumurl:"./icon/icon-id11.png"},{id:12,fid:2,name:"12-robot",thumurl:"./icon/icon-id12.png"},{id:13,fid:2,name:"13-cloudtree",thumurl:"./icon/icon-id13.png"},{id:14,fid:2,name:"14-pump",thumurl:"./icon/icon-id14.png"},{id:15,fid:4,name:"15-rainbowtree1",thumurl:"./icon/icon-id15.png"},{id:16,fid:4,name:"16-mirror",thumurl:"./icon/icon-id16.png"},{id:17,fid:4,name:"17-rainbowtree2",thumurl:"./icon/icon-id17.png"},{id:18,fid:4,name:"18-tv",thumurl:"./icon/icon-id18.png"},{id:19,fid:4,name:"19-rainbowhouse",thumurl:"./icon/icon-id19.png"},{id:20,fid:5,name:"20-gaint",thumurl:"./icon/icon-id20.png"},{id:21,fid:5,name:"21-galaxytree",thumurl:"./icon/icon-id21.png"},{id:22,fid:5,name:"22-galaxyhouse",thumurl:"./icon/icon-id22.png"}],zt={class:"container"},At=["src"],Ot={class:"div-panel"},Lt=["onClick"],qt=["src","onClick"];t("default",A({__name:"World",setup:function(t){var e=z.data,n=Zt,o=O(null),a=O(null),r=L({iconFilter:[],isShow:!0,btndown:"/World/button-down.png",btnup:"icon/button-up.png"}),s=sessionStorage.getItem("arrCollect");if(s=JSON.parse(s))for(var l=0;l<s.length;l++)for(var c=s[l]-0,h=0;h<n.length;h++){c==n[h].id&&r.iconFilter.push(n[h])}var p="";(p=new Qt({data:e})).load();return function(t,e){return N(),q(H,null,[W(i),T("div",zt,[e[1]||(e[1]=F('<img src="'+B+'" class="bag-tag" style="position:absolute;width:449px;height:76px;left:0px;top:78px;z-index:2;" data-v-179df4d2><img src="'+G+'" class="worldbg" style="position:absolute;width:100vw;height:1080px;left:0px;top:0px;z-index:1;" data-v-179df4d2><div id="div_canvas3d" class="threejs-container" data-v-179df4d2></div><img src="'+J+'" class="sky" style="position:absolute;width:1399px;height:868px;left:479px;top:78px;z-index:2;" data-v-179df4d2><img src="'+$+'" class="scene-tag" style="position:absolute;width:80px;height:27px;left:1798px;top:919px;z-index:3;" data-v-179df4d2>',5)),T("img",{class:"button-down mp",style:{position:"absolute",width:"135px",height:"41px",left:"156px",top:"127px","z-index":"10"},onClick:e[0]||(e[0]=function(t){return r.isShow=!r.isShow,void(r.isShow?(o.value.classList.remove("note-none"),a.value.classList.remove("note-none"),o.value.classList.add("note-show"),a.value.classList.add("note-show")):(o.value.classList.remove("note-show"),a.value.classList.remove("note-show"),o.value.classList.add("note-none"),a.value.classList.add("note-none")))}),src:R(r).isShow?R(r).btndown:R(r).btnup},null,8,At),T("div",{ref_key:"myElement1",ref:o,class:"leftdown"},[T("div",Ot,[(N(!0),q(H,null,D(R(r).iconFilter,(function(t,e){return N(),q("div",{key:t.id,class:"div-content"},[T("img",{src:V,class:"deleteicon",onClick:function(e){return function(t){r.iconFilter=r.iconFilter.filter((function(e){return e.id!=t}));var e=sessionStorage.getItem("arrCollect");e=JSON.parse(e);for(var n=[],o=0;o<e.length;o++){var i=e[o]-0;t!=i&&n.push(i)}e=n,sessionStorage.setItem("arrCollect",JSON.stringify(e)),p&&p.deleteModel(t)}(t.id)}},null,8,Lt),T("img",{src:t.thumurl,class:"iconpng mp",onClick:function(e){return function(t){p&&p.addModel(t)}(t.id)}},null,8,qt)])})),128))])],512),T("img",{ref_key:"myElement2",ref:a,src:K,class:"button-down",style:{position:"absolute",width:"449px",height:"497px",left:"0px",top:"78px","z-index":"1"}},null,512)])],64)}}},[["__scopeId","data-v-179df4d2"]]))}}}))}();
